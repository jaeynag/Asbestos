<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="light" />
  <title>Asbestos field photos</title>
  <link rel="stylesheet" href="./styles.css?v=20260119-10" />
  <link rel="icon" href="./favicon.ico" />
  <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Asbestos" />

  <!-- module preload: 홈화면(PWA)에서 모듈 로드 실패 확률을 조금이라도 낮추기 -->
  <link rel="modulepreload" href="./app.js?v=20260209-1" />

</head>
<body>
  <div class="app">
    <header class="topbar">
      <button id="btnBack" class="iconBtn" style="display:none;" aria-label="뒤로가기" type="button">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.5 19.5L8 12l7.5-7.5"/></svg>
      </button>

      <div class="title">
        <div class="h1">Asbestos field photos</div>
      </div>

      <div class="top-actions">
        <button id="btnGear" class="iconBtn" style="display:none;" aria-label="설정" type="button">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19.4 13.5c.04-.5.04-1 0-1.5l2.1-1.6c.2-.16.25-.44.12-.66l-2-3.46c-.13-.22-.4-.3-.64-.2l-2.5 1a7.8 7.8 0 0 0-1.3-.75l-.4-2.65a.52.52 0 0 0-.5-.43h-4a.52.52 0 0 0-.5.43l-.4 2.65c-.46.2-.9.45-1.3.75l-2.5-1a.52.52 0 0 0-.64.2l-2 3.46c-.13.22-.08.5.12.66l2.1 1.6c-.04.5-.04 1 0 1.5L2.9 15.1c-.2.16-.25.44-.12.66l2 3.46c.13.22.4.3.64.2l2.5-1c.4.3.84.55 1.3.75l.4 2.65c.04.24.25.43.5.43h4c.25 0 .46-.19.5-.43l.4-2.65c.46-.2.9-.45 1.3-.75l2.5 1c.24.1.51.02.64-.2l2-3.46c.13-.22.08-.5-.12-.66l-2.1-1.6ZM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5Z"/></svg>
        </button>

        <div id="settingsMenu" class="menu" hidden>
          <button id="menuChangeMode" class="menuItem" type="button">업무 변경</button>
          <button id="menuChangeCompany" class="menuItem" type="button">회사 변경</button>
          <div class="menuSep"></div>
          <button id="menuSignOut" class="menuItem danger" type="button">로그아웃</button>
        </div>
      </div>
    </header>

    <main id="root" class="root"></main>

    <footer class="footer">
      <div id="footStatus" class="footStatus">준비되었습니다.</div>
    </footer>
  </div>

  <!-- 모달(촬영/앨범 선택 후 확인) -->
  <div id="modal" class="modal" hidden>
    <div class="modal-backdrop"></div>
    <div class="modal-card">
      <div class="modal-head">
        <div id="modalTitle" class="modal-title">사진 확인</div>
        <button id="modalClose" class="btn ghost" type="button">닫기</button>
      </div>
      <div class="modal-body">
        <img id="modalPreview" class="modal-preview" alt="미리보기" />
        <div id="modalMeta" class="modal-meta"></div>
      </div>
      <div class="modal-actions">
        <button id="modalReject" class="btn ghost" type="button">다시 선택</button>
        <button id="modalAccept" class="btn primary" type="button">등록</button>
      </div>
    </div>
  </div>

  <!-- 미리보기 모달(썸네일 클릭) -->
  <div id="viewerModal" class="modal" hidden>
    <div class="modal-backdrop"></div>
    <div class="modal-card viewer-card">
      <div class="modal-head">
        <div class="viewer-head-left">
          <div id="viewerTitle" class="modal-title">미리보기</div>
          <div id="viewerLabel" class="viewer-label"></div>
        </div>
        <div class="viewer-head-right">
          <button id="viewerClose" class="btn ghost" type="button">닫기</button>
        </div>
      </div>
      <div class="viewer-body">
        <button id="viewerPrev" class="viewer-nav" type="button" aria-label="이전">‹</button>
        <img id="viewerImg" class="viewer-img" alt="미리보기" />
        <button id="viewerNext" class="viewer-nav" type="button" aria-label="다음">›</button>
      </div>
    </div>
  </div>

  <!--
    전사 공통 설정 (직원/다른 PC 포함)
    - NAS에서 GitHub Pages를 리버스 프록시로 제공하는 경우, 기본값(현재 도메인)이 자동으로 NAS 업로드로 동작합니다.
    - GitHub Pages 도메인(*.github.io)에서 NAS로 강제 업로드하려면 아래 값을 채워 넣으세요.
  -->
  <script>
    (function () {
      // app.js 로드/초기화 실패 시, 홈화면(PWA)에서 빈 화면으로 남는 걸 방지
      var foot = function () { return document.getElementById('footStatus'); };
      try { window.__APP_BOOTED = false; } catch (e) {}

      window.addEventListener('error', function (ev) {
        try {
          var msg = (ev && (ev.message || (ev.error && ev.error.message))) || 'unknown';
          var el = foot();
          if (el) el.textContent = '스크립트 로드 실패: ' + msg;
        } catch (e) {}
      });

      window.addEventListener('unhandledrejection', function (ev) {
        try {
          var reason = ev && ev.reason;
          var msg = (reason && (reason.message || String(reason))) || 'unknown';
          var el = foot();
          if (el) el.textContent = '초기화 실패: ' + msg;
        } catch (e) {}
      });

      // 3.5초 내 부팅 플래그가 안 서면 안내 메시지
      setTimeout(function () {
        try {
          if (window.__APP_BOOTED) return;
          var el = foot();
          if (!el) return;
          el.textContent = '로딩이 지연되고 있어. (홈화면 실행이면 아이콘 삭제 후 다시 추가 / 네트워크 확인)';
        } catch (e) {}
      }, 3500);
    })();
  </script>

  <script>
    window.APP_CONFIG = {
      NAS_GATEWAY_URL: "https://asbts.synology.me",
      NAS_UPLOAD_URL: "https://asbts.synology.me/upload",
      NAS_FILE_BASE: "https://asbts.synology.me/public",
      NAS_DELETE_URL: "",
    };
  </script>

  <link rel="modulepreload" href="./app.js?v=20260119-10" />
  <script type="module" src="./app.js?v=20260119-10"></script>
</body>
</html>





